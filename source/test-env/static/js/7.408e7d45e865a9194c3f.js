webpackJsonp([7],{"08GJ":function(t,e){},"1CLz":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("c+FZ"),a=i("UgCr"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n={props:{productSKUDetail:{type:Object,default:()=>{}},productUid:{type:String,default:""},productQuantity:{type:Number,default:1},index:{type:Number,default:1}},data:()=>({quantity:1,attributeGroupValueVOs:[],productDetail:"",imageUrl:"",elementContentList:"",stock:0,disabled:!1,skuDetail:"",loading:!1}),created(){this.elementContentList=window.elementContentList,this.quantity=this.productQuantity,this.getProDetail(),this.getskuStock()},methods:{getProDetail(){const t={productUid:this.productUid};Object(a.e)(t).then(t=>{200==t.code&&(this.productDetail=t.data,this.imageUrl=t.data.picResourceVOs[0].preViewUrl,this.productDetail.attributeGroupValueVOs.map(t=>{let e=[];t.attributeValueVOS.forEach(t=>{let i=!1;this.productSKUDetail.attributeValueVOs.map(e=>{t.productAttributeValueUid==e.productAttributeValueUid&&(i=!0)});let s=c({},t,{check:i});e.push(s)});let i=c({},t,{attributeValueVOS:e});this.attributeGroupValueVOs.push(i)}))})},getskuStock(){let t=[];this.productSKUDetail.attributeValueVOs.forEach(e=>{t.push(e.productAttributeValueUid)});const e={productAttributeValueUidList:t,productBaseUid:this.productSKUDetail.productBaseUid};Object(a.d)(e).then(t=>{}),Object(a.c)(e).then(t=>{this.skuDetail=t.data,this.stock=t.data.realStock}),Object(a.a)(e).then(t=>{t.data?this.disabled=!1:this.disabled=!0})},handleClose(){this.$parent.showProInfo=!1},handleConfirm(){this.loading=!0;const t={productBaseUid:this.productSKUDetail.productBaseUid,productSkuUid:this.skuDetail.productSkuStockUid,productUid:this.productUid,quantity:this.quantity};Object(s.c)(this.productSKUDetail.id,t).then(t=>{200==t.code?(this.$parent.showProInfo=!1,this.$message.success({message:this.elementContentList.portal_cart_msg4||this.$t("cart.msg4"),duration:1500}),this.$emit("changeSKUUid",this.skuDetail,this.quantity,this.index)):this.$message.success({message:t.message,duration:1500})})},handleChangeAttr(t,e,i,s){this.attributeGroupValueVOs[e].attributeValueVOS.forEach(t=>{t.productAttributeValueUid==i.productAttributeValueUid?t.check=!0:t.check=!1});let c=[],n=[];this.attributeGroupValueVOs.forEach(t=>{t.attributeValueVOS.forEach(t=>{t.check&&(c.push(t.productAttributeValueUid),n.push(t.check))})});const r={productAttributeValueUidList:c,productBaseUid:this.productDetail.productBaseUid};Object(a.d)(r).then(t=>{}),Object(a.c)(r).then(t=>{this.skuDetail=t.data,n.length==this.attributeGroupValueVOs.length?this.stock=t.data.realStock||0:this.stock=this.productDetail.realStock||this.totalStock}),Object(a.a)(r).then(t=>{t.data?this.disabled=!1:this.disabled=!0})},handleInput(){return this.quantity=this.quantity.replace(/[^\d]/g,""),this.quantity<1?this.quantity=1:this.quantity>=999?this.quantity=999:void 0},handleMinusNum(){if(this.quantity<=1)return!1;this.quantity--},handleAddNum(){if(this.quantity>=999)return!1;this.quantity++}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"productInfo flex_c_c"},[i("div",{staticClass:"info_card"},[i("p",{staticClass:"dia_title"},[t._v("\n      "+t._s(t.elementContentList.portal_order_text14||t.$t("order.text14"))),i("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),t._v(" "),i("div",{staticClass:"info_container"},[i("div",{staticClass:"info_left"},[i("div",{staticClass:"info_image"},[i("img",{attrs:{src:t.imageUrl}})])]),t._v(" "),i("div",{staticClass:"info_right"},[i("p",{staticClass:"pro_title"},[t._v("\n          "+t._s(t.productDetail.name)+"\n        ")]),t._v(" "),i("p",{staticClass:"unit_price"},[t._v("\n          £ "),i("span",[t._v(t._s(t.productDetail.price))])]),t._v(" "),t._l(t.attributeGroupValueVOs,function(e,s){return i("div",{key:s+"attribute"},[i("p",{staticClass:"spec_label"},[t._v(t._s(e.productAttributeName))]),t._v(" "),i("div",{staticClass:"spec_color"},t._l(e.attributeValueVOS,function(a,c){return i("div",{key:a.productAttributeValueUid,staticClass:"spec_color_item flex",class:1==a.check?"active":"",on:{click:function(i){return t.handleChangeAttr(e,s,a,c)}}},[i("span",[t._v(t._s(a.value))]),t._v(" "),i("div",{staticClass:"active_border"})])}),0)])}),t._v(" "),i("p",{staticClass:"spec_label"},[t._v(t._s(t.elementContentList.portal_product_text1||t.$t("product.text1")))]),t._v(" "),i("div",{staticStyle:{padding:"8px",border:"1px solid #dfe2e5","border-radius":"4px",width:"fit-content","min-width":"40px","text-align":"center"}},[t._v("\n          "+t._s(t.stock)+"\n        ")]),t._v(" "),i("p",{staticClass:"spec_label"},[t._v("\n          "+t._s(t.elementContentList.portal_order_text33||t.$t("order.text33"))+"\n        ")]),t._v(" "),i("p",{staticClass:"qty_btns flex"},[i("el-button",{staticClass:"btn",attrs:{icon:"el-icon-minus"},on:{click:t.handleMinusNum}}),t._v(" "),i("el-input",{on:{input:t.handleInput},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),t._v(" "),i("el-button",{staticClass:"btn",attrs:{icon:"el-icon-plus"},on:{click:t.handleAddNum}})],1),t._v(" "),i("p",{staticClass:"buy_btns"},[i("el-button",{staticClass:"btn",attrs:{loading:t.loading,disabled:t.disabled},on:{click:t.handleConfirm}},[t._v(t._s(t.elementContentList.portal_btns_confirm||t.$t("btns.confirm")))])],1)],2)])])])},staticRenderFns:[]};var o=i("VU/8")(n,r,!1,function(t){i("nGy0")},null,null).exports,l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},u={name:"cart",components:{productInfo:o},data:()=>({subtotal:1,priceTotal:0,cartList:[],checkedList:[],productUid:"",productQuantity:"",showProInfo:!1,elementContentList:"",isOpen:!1,productSKUDetail:"",index:"",typeArr:[]}),mounted(){this.elementContentList=window.elementContentList,this.getCartList()},methods:{changeSKUUid(t,e,i){this.cartList[i].attributeValueVOs=t.attributeValueVOs,this.cartList[i].priceTotal=t.attributeValueVOs,this.cartList[i]=l({},this.cartList[i],t,{productSkuUid:t.productSkuStockUid,priceTotal:t.price*e,quantity:e})},handleEdit(t,e){this.productUid=t.productUid,this.productQuantity=t.quantity,this.productSKUDetail=t,this.index=e,this.showProInfo=!0},getCartList(){Object(s.g)({pageNum:1,pageSize:1e3}).then(t=>{if(200==t.code){let e=[];t.data.list.map(t=>{let i=l({},t,{priceTotal:t.price*t.quantity,check:!1});e.push(i)}),this.cartList=e,this.getPriceTotal()}})},handleToCheckout(){let t=!1;this.typeArr.length>1&&(t=!0),this.$router.push({path:"/settlement",query:{from:"cart",cartIds:JSON.stringify(this.checkedList),isGroup:t}})},handleChange(){let t=[],e=[];this.cartList.forEach(i=>{i.check&&(t.push(Number(i.id)),e.push(i.productType))}),this.checkedList=t,this.typeArr=[...new Set(e)],this.getPriceTotal()},getPriceTotal(){let t=0;this.cartList.forEach(e=>{e.check&&(t+=e.quantity*e.price)}),this.priceTotal=t},handleMinusNum(t,e){if(this.cartList[t].quantity<=1)return!1;const i={productBaseUid:e.productBaseUid,productSkuUid:e.productSkuUid,productUid:e.productUid,quantity:e.quantity--};Object(s.c)(e.id,i).then(e=>{200==e.code?(this.cartList[t].quantity--,this.cartList[t].priceTotal=this.cartList[t].quantity*this.cartList[t].price,this.cartList[t].check&&this.getPriceTotal()):this.$message.success({message:e.message,duration:1500})})},handleAddNum(t,e){if(this.cartList[t].quantity>=999)return!1;const i={productBaseUid:e.productBaseUid,productSkuUid:e.productSkuUid,productUid:e.productUid,quantity:e.quantity++};Object(s.c)(e.id,i).then(e=>{200==e.code?(this.cartList[t].quantity++,this.cartList[t].priceTotal=this.cartList[t].quantity*this.cartList[t].price,this.cartList[t].check&&this.getPriceTotal()):this.$message.success({message:e.message,duration:1500})})},handleInput(t,e){if(this.cartList[t].quantity=this.cartList[t].quantity.replace(/[^\d]/g,""),this.cartList[t].quantity<1)return this.cartList[t].quantity=1,!1;if(this.cartList[t].quantity>=999)return this.cartList[t].quantity=999,!1;const i={productBaseUid:e.productBaseUid,productSkuUid:e.productSkuUid,productUid:e.productUid,quantity:e.quantity};Object(s.c)(e.id,i).then(e=>{200==e.code?(this.cartList[t].priceTotal=this.cartList[t].quantity*this.cartList[t].price,this.cartList[t].check&&this.getPriceTotal()):this.$message.success({message:e.message,duration:1500})})},handleRemove(t,e){if("custom"==t.productType){const i=this.$createElement;let a=this.elementContentList.portal_cart_msg2||this.$t("cart.msg2"),c=this.elementContentList.portal_cart_msg3||this.$t("cart.msg3"),n=this.elementContentList.portal_btns_remove||this.$t("btns.remove"),r=this.elementContentList.portal_btns_cancel||this.$t("btns.cancel");this.$msgbox({message:i("div",null,[i("p",{style:"font-size: 16px;font-weight: 500;line-height: 24px;margin-bottom:8px;"},a),i("p",null,c)]),cancelButtonClass:"cancel_btn",confirmButtonClass:"confirm_btn",showCancelButton:!0,confirmButtonText:n,cancelButtonText:r,type:"warning"}).then(()=>{Object(s.b)(t.id).then(t=>{200==t.code&&(this.cartList.splice(e,1),this.$message.success({message:this.elementContentList.portal_cart_msg1||this.$t("cart.msg1"),duration:1500}),this.$store.dispatch("UpdateCartNum"))})}).catch(()=>{})}else Object(s.b)(t.id).then(t=>{200==t.code&&(this.cartList.splice(e,1),this.$message.success({message:this.elementContentList.portal_cart_msg1||this.$t("cart.msg1"),duration:1500}),this.$store.dispatch("UpdateCartNum"))})}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopping_cart"},[i("div",{staticClass:"cart"},[i("h1",[t._v(t._s(t.elementContentList.portal_cart_text1||t.$t("cart.text1")))]),t._v(" "),i("div",{staticClass:"cart_main"},[t.cartList.length>0?i("div",{staticClass:"cart_list"},t._l(t.cartList,function(e,s){return i("div",{key:s+"c",staticClass:"cart_item"},["normal"==e.productType?i("div",{staticClass:"item"},[i("div",{staticClass:"flex"},[i("el-checkbox",{on:{change:t.handleChange},model:{value:e.check,callback:function(i){t.$set(e,"check",i)},expression:"item.check"}})],1),t._v(" "),i("div",{staticClass:"pro_img"},[i("img",{attrs:{src:e.productPicUrl}})]),t._v(" "),i("div",{staticClass:"pro_detail"},[i("p",{staticClass:"pro_title"},[t._v(t._s(e.productName))]),t._v(" "),t._l(e.attributeValueVOs,function(e){return i("p",{key:e.productAttributeUid,staticClass:"pro_style"},[t._v("\n                "+t._s(e.productAttributeName)+": "),i("span",[t._v(t._s(e.value))])])}),t._v(" "),i("p",{staticClass:"quantity"},[i("span",[t._v(t._s(t.elementContentList.portal_cart_text4||t.$t("cart.text4")))]),t._v(" "),i("el-input",{on:{input:function(i){return t.handleInput(s,e)}},model:{value:e.quantity,callback:function(i){t.$set(e,"quantity",i)},expression:"item.quantity"}}),t._v(" "),i("el-button",{staticClass:"btn btn3",attrs:{icon:"el-icon-arrow-up"},on:{click:function(i){return t.handleAddNum(s,e)}}}),t._v(" "),i("el-button",{staticClass:"btn btn2",attrs:{icon:"el-icon-arrow-down"},on:{click:function(i){return t.handleMinusNum(s,e)}}})],1)],2),t._v(" "),i("div",{staticClass:"price"},[i("p",[t._v("£ "+t._s(e.priceTotal))]),t._v(" "),i("div",[i("span",{staticClass:"edit",on:{click:function(i){return t.handleEdit(e,s)}}},[t._v(t._s(t.elementContentList.portal_btns_edit||t.$t("btns.edit")))]),t._v(" "),i("span",{on:{click:function(i){return t.handleRemove(e,s)}}},[t._v(t._s(t.elementContentList.portal_btns_remove||t.$t("btns.remove")))])])])]):t._e(),t._v(" "),"package"==e.productType?i("div",{staticClass:"item"},[i("div",{staticClass:"flex"},[i("el-checkbox",{on:{change:t.handleChange},model:{value:e.check,callback:function(i){t.$set(e,"check",i)},expression:"item.check"}})],1),t._v(" "),i("div",{staticClass:"pro_img"},[i("img",{attrs:{src:e.productPicUrl}})]),t._v(" "),i("div",{staticClass:"pro_detail"},[i("p",{staticClass:"pro_title"},[t._v(t._s(e.productName))]),t._v(" "),t._l(e.packageProductVOList,function(e){return i("div",{key:e.packageProductSkuUid,staticClass:"pro_package"},[i("div",{staticClass:"pack_item flex_b_c"},[i("div",{staticClass:"flex"},[i("div",{staticClass:"pack_img"},[i("img",{attrs:{src:e.productSkuStockThumbnail}})]),t._v(" "),i("div",[i("span",[t._v(t._s(e.packageProductName+":"))]),t._l(e.attributeValueVOs,function(s,a){return i("span",{key:s.productAttributeUid},[t._v(t._s(s.value+(a==e.attributeValueVOs.length-1?"":",")))])})],2)]),t._v(" "),i("div",[t._v(t._s("x"+e.num))])])])}),t._v(" "),i("p",{staticClass:"quantity"},[i("span",[t._v(t._s(t.elementContentList.portal_cart_text4||t.$t("cart.text4")))]),t._v(" "),i("el-input",{on:{input:function(e){return t.handleInput(s)}},model:{value:e.quantity,callback:function(i){t.$set(e,"quantity",i)},expression:"item.quantity"}}),t._v(" "),i("el-button",{staticClass:"btn btn3",attrs:{icon:"el-icon-arrow-up"},on:{click:function(e){return t.handleAddNum(s)}}}),t._v(" "),i("el-button",{staticClass:"btn btn2",attrs:{icon:"el-icon-arrow-down"},on:{click:function(e){return t.handleMinusNum(s)}}})],1)],2),t._v(" "),i("div",{staticClass:"price"},[i("p",[t._v("£ "+t._s(e.priceTotal))]),t._v(" "),i("div",[i("span",{staticClass:"edit",on:{click:function(i){return t.handleEdit(e,s)}}},[t._v(t._s(t.elementContentList.portal_btns_edit||t.$t("btns.edit")))]),t._v(" "),i("span",{on:{click:function(i){return t.handleRemove(e,s)}}},[t._v(t._s(t.elementContentList.portal_btns_remove||t.$t("btns.remove")))])])])]):t._e(),t._v(" "),"custom"==e.productType?i("div",{staticClass:"item"},[i("div",{staticClass:"flex"},[i("el-checkbox",{on:{change:t.handleChange},model:{value:e.check,callback:function(i){t.$set(e,"check",i)},expression:"item.check"}})],1),t._v(" "),t._m(0,!0),t._v(" "),i("div",{staticClass:"pro_detail"},[i("p",{staticClass:"pro_title"},[t._v(t._s(e.productName))]),t._v(" "),t._l(e.cartCusObjItemVOS,function(e){return i("p",{key:e.cartCusItemId,staticClass:"pro_style"},[i("span",{staticStyle:{"margin-right":"24px"}},[t._v(t._s(e.objNickname))]),t._v(" "),i("span",{staticStyle:{"margin-right":"24px"}},[t._v(t._s((e.height?e.height+"cm":"")+(e.weight?e.weight+"kg":"")))]),t._v(" "),i("span",{staticStyle:{"margin-right":"24px"}},[t._v(t._s(e.ratio))]),t._v(" "),i("span",{staticStyle:{color:"#f6497f"}},[t._v("£ "+t._s(e.price))])])}),t._v(" "),i("div",{staticClass:"pro_info"},[i("p",{on:{click:function(e){t.isOpen=!t.isOpen}}},[i("span",[t._v(t._s(t.elementContentList.portal_cart_text11||t.$t("cart.text11")))]),t._v(" "),t.isOpen?i("i",{staticClass:"el-icon-arrow-up"}):i("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticStyle:{"margin-top":"16px"}},t._l(e.cartCusServiceItemVOS,function(e){return i("div",{key:e.cartCusItemId,staticClass:"pro_item flex"},[i("div",{staticClass:"flex_c_c img"},[i("img",{attrs:{src:e.productPicUrl}})]),t._v(" "),i("div",{staticClass:"pro_name"},[i("div",{staticClass:"name"},[t._v(t._s(e.productName))]),t._v(" "),i("div",[i("span",[t._v(t._s("x "+e.quantity))]),i("span",{staticClass:"pro_price"},[t._v("£ "+t._s(e.price))])])])])}),0)])],2),t._v(" "),i("div",{staticClass:"price"},[i("p",[t._v("£ "+t._s(e.priceTotal))]),t._v(" "),i("div",[i("span",{on:{click:function(i){return t.handleRemove(e,s)}}},[t._v(t._s(t.elementContentList.portal_btns_remove||t.$t("btns.remove")))])])])]):t._e()])}),0):t._e(),t._v(" "),0==t.cartList.length?i("div",{staticClass:"cart_list nodata flex_c_c"},[t._m(1),t._v(" "),i("p",{staticStyle:{margin:"22px 0"}},[t._v(t._s("Shopping cart is empty"))])]):t._e(),t._v(" "),i("div",{staticClass:"settlement"},[i("p",{staticClass:"subtotal"},[t._v("\n          "+t._s(t.elementContentList.portal_cart_text7||t.$t("cart.text7"))+" ("+t._s(t.subtotal)+t._s(t.elementContentList.portal_cart_text8||t.$t("cart.text8"))+")\n        ")]),t._v(" "),i("hr"),t._v(" "),i("p",{staticClass:"price_total"},[t._v("\n          "+t._s(t.elementContentList.portal_cart_text9||t.$t("cart.text9"))+t._s(t.priceTotal)+"\n        ")]),t._v(" "),i("el-button",{staticClass:"checkout",attrs:{disabled:0==t.checkedList.length},on:{click:t.handleToCheckout}},[t._v(t._s(t.elementContentList.portal_cart_text10||t.$t("cart.text10")))])],1)])]),t._v(" "),t.showProInfo?i("productInfo",{attrs:{productUid:t.productUid,productQuantity:t.productQuantity,productSKUDetail:t.productSKUDetail,index:t.index},on:{changeSKUUid:t.changeSKUUid}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pro_img flex_c_c",staticStyle:{background:"linear-gradient(0deg, #ffe0e0 2%, #ffdce9 100%)"}},[e("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:i("ThK+")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:i("5xjm")}})])}]};var p=i("VU/8")(u,d,!1,function(t){i("08GJ")},null,null);e.default=p.exports},nGy0:function(t,e){}});
//# sourceMappingURL=7.408e7d45e865a9194c3f.js.map