webpackJsonp([9],{"E8c/":function(t,e){},OBeS:function(t,e){},SKi1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("O6FA"),a=s("UgCr"),o=s("c+FZ"),r=s("FWz8"),l={name:"Video",props:{src:{type:String,required:!0,default:""},poster:{type:String,default:""},second:{type:Number,default:.5},width:{type:Number,default:800},height:{type:Number,default:450},autoplay:{type:Boolean,default:!1},controls:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},preload:{type:String,default:"metadata"},showPlay:{type:Boolean,default:!0},playWidth:{type:Number,default:96},zoom:{type:String,default:"contain"}},data(){return{veoPoster:this.poster,originPlay:!0,hidden:!1}},mounted(){this.autoplay&&(this.hidden=!0,this.originPlay=!1)},methods:{getPoster(){this.$refs.veo.currentTime=this.second;const t=document.createElement("canvas"),e=t.getContext("2d");t.width=this.$refs.veo.videoWidth,t.height=this.$refs.veo.videoHeight,e.drawImage(this.$refs.veo,0,0,t.width,t.height),this.veoPoster=t.toDataURL("image/png")},onPlay(){this.originPlay&&(this.$refs.veo.currentTime=0,this.originPlay=!1),this.autoplay?this.$refs.veo.pause():(this.hidden=!0,this.$refs.veo.play())},onPause(){this.hidden=!1},onPlaying(){this.hidden=!0}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-video",class:{"u-video-hover":!t.hidden},style:"width: "+t.width+"px; height: "+t.height+"px;"},[s("video",t._b({ref:"veo",style:"object-fit: "+t.zoom+";",attrs:{src:t.src,poster:t.veoPoster,width:t.width,height:t.height,autoplay:t.autoplay,controls:!t.originPlay&&t.controls,loop:t.loop,preload:t.preload,crossorigin:"anonymous"},domProps:{muted:t.autoplay||t.muted},on:{loadeddata:function(e){t.poster||t.getPoster()},pause:function(e){t.showPlay&&t.onPause()},playing:function(e){t.showPlay&&t.onPlaying()},"~click":function(e){return e.preventDefault(),t.onPlay.apply(null,arguments)}}},"video",t.$attrs,!1),[t._v("\n    您的浏览器不支持video标签。\n  ")]),t._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:t.originPlay||t.showPlay,expression:"originPlay || showPlay"}],staticClass:"u-play",class:{hidden:t.hidden},style:"width: "+t.playWidth+"px; height: "+t.playWidth+"px;",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15.25 12L9.75 8.75V15.25L15.25 12Z"}})])])},staticRenderFns:[]};var d=s("VU/8")(l,n,!1,function(t){s("OBeS")},"data-v-099ebb67",null).exports,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},u={name:"product",components:{footerBar:i.a,Video:d},data:()=>({imageAct:0,imageUrl:"",videoUrl:"",mediaList:[],quantity:1,showIndex:0,multipleIdx:1,multiple:1,recommendList:[],Loading:!1,coverLayerStyle:{transform:""},coverLayerImg:{},coverLayerShow:!1,productDetail:"",skuDetail:"",attributeGroupValueVOs:[],poster:"",showSkuList:!1,stock:0,disabled:!0,elementContentList:"",totalStock:0}),watch:{stock:t=>{}},mounted(){this.elementContentList=window.elementContentList,this.getProDetail()},methods:{getProDetail(){const t={productUid:this.$route.query.uid};Object(a.e)(t).then(t=>{200==t.code&&(this.productDetail=t.data,this.recommendList=t.data.recFormVOs||[],this.stock=t.data.totalStock,this.totalStock=t.data.totalStock,this.mediaList=this.productDetail.picResourceVOs,this.mediaList.splice(1,0,t.data.videoResourceVOs[0]),this.poster=t.data.videoResourceVOs[0].masterPic,this.imageUrl=this.mediaList[0].preViewUrl,this.productDetail.attributeGroupValueVOs.map(t=>{let e=[];t.attributeValueVOS.forEach(t=>{let s=c({},t,{check:!1});e.push(s)});let s=c({},t,{attributeValueVOS:e});this.attributeGroupValueVOs.push(s)}),0==this.attributeGroupValueVOs.length||1==this.attributeGroupValueVOs.length&&this.attributeGroupValueVOs[0].attributeValueVOS.length<=1?(this.showSkuList=!1,this.handleChangeAttr2()):this.showSkuList=!0)})},getProSku(){proSku({productBaseUid:0}).then(t=>{})},enterHandler(){this.coverLayerShow=!0},moveHandler(t){let e=t.offsetX,s=t.offsetY,i=e-100<0?0:e-100,a=s-100<0?0:s-100;i>250&&(i=250),a>250&&(a=250),this.coverLayerStyle.transform=`translate(${i}px,${a}px)`,this.coverLayerImg.transform=`translate(-${i}px,-${a}px)`},outHandler(){this.coverLayerShow=!1},handleMinusIndx(){if(1==this.showIndex)return!1;this.showIndex=this.showIndex-4,this.multiple--},handleAddIndx(){if(this.showIndex==Math.ceil(this.recommendList.length/4))return!1;this.showIndex=this.showIndex+4,this.multiple++},handleChangeAttr2(){let t=[];this.attributeGroupValueVOs.forEach(e=>{e.attributeValueVOS.forEach(e=>{t.push(e.productAttributeValueUid)})});const e={productAttributeValueUidList:t,productBaseUid:this.productDetail.productBaseUid};Object(a.d)(e).then(t=>{}),Object(a.c)(e).then(t=>{this.skuDetail=t.data}),Object(a.a)(e).then(t=>{t.data?this.disabled=!1:this.disabled=!0})},handleBuyNow(){this.showSkuList||this.handleChangeAttr2();const t={productBaseUid:this.productDetail.productBaseUid,productSkuUid:this.skuDetail.productSkuStockUid,productUid:this.productDetail.productUid,quantity:this.quantity};Object(r.c)(t).then(t=>{200==t.code&&this.$router.push({path:"/settlement",query:{from:"now",params:JSON.stringify(t.data)}})})},handleAddToCart(){this.showSkuList||this.handleChangeAttr2();const t={productBaseUid:this.productDetail.productBaseUid,productSkuUid:this.skuDetail.productSkuStockUid,productUid:this.productDetail.productUid,quantity:this.quantity};Object(o.a)(t).then(t=>{200==t.code&&(this.$message.success({message:this.elementContentList.portal_product_text6||this.$t("product.text6"),duration:1500}),this.$store.dispatch("UpdateCartNum"))})},handleInput(){if(this.quantity=this.quantity.replace(/[^\d]/g,""),this.quantity<1)return this.quantity=""},handleMinusQty(){if(this.quantity<=1)return!1;this.quantity--},handleAddQty(){this.quantity++},handleChangeAttr(t,e,s,i){this.attributeGroupValueVOs[e].attributeValueVOS.forEach(t=>{t.productAttributeValueUid==s.productAttributeValueUid?t.check=!0:t.check=!1});let o=[],r=[];this.attributeGroupValueVOs.forEach(t=>{t.attributeValueVOS.forEach(t=>{t.check&&(o.push(t.productAttributeValueUid),r.push(t.check))})});const l={productAttributeValueUidList:o,productBaseUid:this.productDetail.productBaseUid};Object(a.d)(l).then(t=>{}),Object(a.c)(l).then(t=>{this.skuDetail=t.data,r.length==this.attributeGroupValueVOs.length?this.stock=t.data.realStock||0:this.stock=this.productDetail.realStock||this.totalStock}),Object(a.a)(l).then(t=>{t.data?this.disabled=!1:this.disabled=!0})},handleChangeImage(t,e){t.playUrl?(this.videoUrl=t.playUrl,this.imageUrl=""):(this.imageUrl=t.preViewUrl,this.videoUrl=""),this.imageAct=e}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product"},[s("div",{staticClass:"pro_container"},[s("div",{staticClass:"pro_basic_info"},[s("div",{staticClass:"image_info"},[s("div",{staticClass:"image_view"},[t.videoUrl?s("video",{attrs:{src:t.videoUrl,autoplay:"",controls:""}}):t._e(),t._v(" "),t.imageUrl?s("img",{attrs:{src:t.imageUrl}}):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.coverLayerShow&&t.imageUrl,expression:"coverLayerShow && imageUrl"}],staticClass:"coverLayerMouse",style:t.coverLayerStyle}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl,expression:"imageUrl"}],staticClass:"coverLayerMaskTop",on:{mouseenter:t.enterHandler,mousemove:t.moveHandler,mouseout:t.outHandler}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.coverLayerShow&&t.imageUrl,expression:"coverLayerShow && imageUrl"}],staticClass:"coverLayerRight"},[s("img",{staticClass:"coverLayerRightImg",style:t.coverLayerImg,attrs:{src:t.imageUrl,fit:"contain"}})])]),t._v(" "),s("div",{staticClass:"image_list"},t._l(t.productDetail.picResourceVOs,function(e,i){return s("div",{key:i+"img",staticClass:"image_item",class:t.imageAct==i?"active":""},[e.playUrl?s("video",{attrs:{src:e.playUrl},on:{click:function(s){return t.handleChangeImage(e,i)}}}):s("img",{attrs:{src:e.thumbnailViewUrl},on:{click:function(s){return t.handleChangeImage(e,i)}}}),t._v(" "),s("div",{staticClass:"active_border"})])}),0)]),t._v(" "),s("div",{staticClass:"spec_info"},[s("p",{staticClass:"pro_title"},[t._v(t._s(t.productDetail.name))]),t._v(" "),s("p",{staticClass:"unit_price"},[t._v("\n          £ "),s("span",[t._v(t._s(t.productDetail.price))])]),t._v(" "),t._l(t.attributeGroupValueVOs,function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSkuList,expression:"showSkuList"}],key:i+"attribute"},[s("p",{staticClass:"spec_label"},[t._v(t._s(e.productAttributeName))]),t._v(" "),s("div",{staticClass:"spec_color"},t._l(e.attributeValueVOS,function(a,o){return s("div",{key:a.productAttributeValueUid,staticClass:"spec_color_item flex_c_c",class:1==a.check?"active":"",on:{click:function(s){return t.handleChangeAttr(e,i,a,o)}}},[s("span",[t._v(t._s(a.value))]),t._v(" "),s("div",{staticClass:"active_border"})])}),0)])}),t._v(" "),s("p",{staticClass:"spec_label"},[t._v("\n          "+t._s(t.elementContentList.portal_product_text1||t.$t("product.text1"))+"\n        ")]),t._v(" "),s("div",{staticStyle:{padding:"8px",border:"1px solid #dfe2e5","border-radius":"4px",width:"fit-content","min-width":"40px","text-align":"center"}},[t._v("\n          "+t._s(t.stock)+"\n        ")]),t._v(" "),s("p",{staticClass:"spec_label"},[t._v("\n          "+t._s(t.elementContentList.portal_product_text2||t.$t("product.text2"))+"\n        ")]),t._v(" "),s("p",{staticClass:"qty_btns flex"},[s("el-button",{staticClass:"btn",attrs:{icon:"el-icon-minus"},on:{click:t.handleMinusQty}}),t._v(" "),s("el-input",{on:{input:t.handleInput},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),t._v(" "),s("el-button",{staticClass:"btn",attrs:{icon:"el-icon-plus"},on:{click:t.handleAddQty}})],1),t._v(" "),s("p",{staticClass:"buy_btns"},[s("el-button",{staticClass:"btn",attrs:{disabled:t.disabled},on:{click:t.handleBuyNow}},[t._v(t._s(t.elementContentList.portal_product_btns_btn1||t.$t("product.btns.btn1")))]),t._v(" "),s("el-button",{staticClass:"btn btn2",attrs:{disabled:t.disabled},on:{click:t.handleAddToCart}},[t._v(t._s(t.elementContentList.portal_product_btns_btn2||t.$t("product.btns.btn2")))])],1)],2)]),t._v(" "),s("div",{staticClass:"pro_details_info"},[s("div",{staticClass:"pro_about"},[s("p",{staticClass:"pro_label"},[t._v("\n          "+t._s(t.elementContentList.portal_product_text3||t.$t("product.text3"))+"\n        ")]),t._v(" "),s("p",{staticClass:"pro_subtitle"},[t._v("\n          "+t._s(t.elementContentList.portal_product_text4||t.$t("product.text4"))+"\n        ")]),t._v(" "),s("div",{staticClass:"pro_desc"},t._l(t.productDetail.detailVOs,function(e,i){return s("p",{key:i+"detail"},["word"==e.type?s("span",[t._v(t._s(e.detailDesc))]):s("img",{attrs:{src:e.detailImageUrl}})])}),0),t._v(" "),t.recommendList.length>0?s("p",{staticClass:"pro_label"},[t._v("\n          "+t._s(t.elementContentList.portal_product_text5||t.$t("product.text5"))+"\n        ")]):t._e(),t._v(" "),t.recommendList.length>0?s("div",{staticClass:"recommend"},[s("div",{staticClass:"recommend_roll flex"},[t.recommendList.length>4?s("div",{staticClass:"to_left",class:1==t.multiple?"disabled":""},[s("i",{staticClass:"el-icon-arrow-left",on:{click:t.handleMinusIndx}})]):t._e(),t._v(" "),s("div",{staticClass:"rec_list"},t._l(t.recommendList,function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showIndex<=i,expression:"showIndex <= idx"}],key:i+"r",staticClass:"rec_item"},[s("div",{staticClass:"rec_iamge"},[s("img",{attrs:{src:e.masterPicUrl}})]),t._v(" "),s("p",{staticClass:"rec_title"},[t._v(t._s(e.recProductName))]),t._v(" "),s("div",{staticClass:"rec_label flex"}),t._v(" "),s("div",{staticClass:"rec_btn flex_b_c"},[s("span",{staticClass:"price"},[t._v("£ "+t._s(e.price))]),t._v(" "),s("el-button",{staticClass:"btn"},[t._v(t._s(t.elementContentList.portal_product_btns_btn2||t.$t("product.btns.btn2")))])],1)])}),0),t._v(" "),t.recommendList.length>4?s("div",{staticClass:"to_right",class:t.multiple==Math.ceil(this.recommendList.length/4)?"disabled":"",on:{click:t.handleAddIndx}},[s("i",{staticClass:"el-icon-arrow-right"})]):t._e()])]):t._e()])])]),t._v(" "),s("footerBar")],1)},staticRenderFns:[]};var p=s("VU/8")(u,h,!1,function(t){s("E8c/")},null,null);e.default=p.exports}});
//# sourceMappingURL=9.4f1ac9b412f7948ad537.js.map