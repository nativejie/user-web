import{i as a}from"./validate-MZlC_wl6.js";import{n as r,r as m,b as d,c as p}from"./index-C6rblSgp.js";import{l as g,_ as c,a as _}from"./pokidol-3C28LqC9.js";import{t as h,p as f}from"./terms-ChenOVHG.js";const u={name:"register",components:{terms:h,privacyPolicy:f},data(){return{emailForm:{email:"",code:""},emailRules:{email:[{required:!0,trigger:"blur",validator:(n,s,l)=>{s?a(s)?l():l(new Error(this.elementContentList.portal_login_form_validate2||this.$t("login.form.validate2"))):l(new Error(this.elementContentList.portal_login_form_validate1||this.$t("login.form.validate1")))}}],code:[{required:!0,trigger:"blur",validator:(n,s,l)=>{s?l():l(new Error(this.elementContentList.portal_login_form_validate5||this.$t("login.form.validate5")))}}]},signForm:{username:"",password:"",checkPwd:""},signRules:{username:[{required:!0,trigger:"change",validator:(n,s,l)=>{s?s.length>20?l(new Error(this.elementContentList.portal_login_form_validate7||this.$t("login.form.validate7"))):l():l(new Error(this.elementContentList.portal_login_form_validate6||this.$t("login.form.validate6")))}}],password:[{required:!0,trigger:"blur",validator:(n,s,l)=>{s?s.length<8?l(new Error(this.elementContentList.portal_login_form_validate4||this.$t("login.form.validate4"))):l():l(new Error(this.elementContentList.portal_login_form_validate3||this.$t("login.form.validate3")))}}],checkPwd:[{required:!0,trigger:"blur",validator:(n,s,l)=>{s?s!=this.signForm.password?l(new Error(this.elementContentList.portal_login_form_validate9||this.$t("login.form.validate9"))):l():l(new Error(this.elementContentList.portal_login_form_validate8||this.$t("login.form.validate8")))}}]},loading:!1,pwdType:"password",pwdType2:"password",login_center_bg:g,dialogVisible:!1,supportDialogVisible:!1,isAgree:!1,showEmail:!0,disabled:!0,isSend:!1,remaining:60,timer:null,elementContentList:"",showTerms:!1,showPrivacy:!1}},watch:{"emailForm.email"(o){o?a(o)?this.disabled=!1:this.disabled=!0:this.disabled=!0}},created(){this.elementContentList=window.elementContentList},methods:{handleSendCode(){this.disabled=!0,this.isSend=!0,this.timer=setInterval(()=>{this.remaining--,this.remaining==0&&(clearInterval(this.timer),this.disabled=!1,this.isSend=!1,this.remaining=60)},1e3),m(this.emailForm.email).then(()=>{})},handleSignIn(){window.location.href="/login"},handleShowAgreement(o){o=="service"?this.showTerms=!0:this.showPrivacy=!0},handleSignUp(){this.$refs.signForm.validate(o=>{if(o){this.loading=!0;const e={account:this.emailForm.email,authCode:this.emailForm.code,nickName:this.signForm.username,password:this.signForm.password};d(e).then(t=>{t.code==200?(this.$message.success({message:this.elementContentList.portal_login_msg3||this.$t("login.msg3"),duration:1500}),this.loading=!1,this.$router.push("/login")):this.loading=!1}).catch(()=>{this.loading=!1})}else return!1})},showPwd(){this.pwdType==="password"?this.pwdType="":this.pwdType="password"},showPwd2(){this.pwdType2==="password"?this.pwdType2="":this.pwdType2="password"},handleNext(){if(!this.isAgree)return this.$message.error({message:this.elementContentList.portal_login_text14||this.$t("login.text14"),duration:1500});this.$refs.emailForm.validate(o=>{if(o)this.loading=!0,p(this.emailForm.email,this.emailForm.code).then(e=>{e.code==200?this.showEmail=!1:this.$message.error({message:this.elementContentList.portal_login_msg2||this.$t("login.msg2"),duration:1500}),this.loading=!1}).catch(e=>{this.loading=!1});else return!1})}}};var v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register flex_c_c"},[e._m(0),t("div",{staticClass:"login_main flex_c_c"},[t("div",{staticClass:"register_card"},[t("p",{staticClass:"p1"},[e._v(" "+e._s(e.elementContentList.portal_login_text2||e.$t("login.text2"))+" ")]),e.showEmail?t("div",{staticClass:"form_card"},[t("el-form",{ref:"emailForm",attrs:{autoComplete:"on",model:e.emailForm,rules:e.emailRules,"label-position":"top"}},[t("el-form-item",{attrs:{prop:"email",label:e.elementContentList.portal_navbar_form_label1||e.$t("login.form.label1")}},[t("el-input",{attrs:{name:"email",type:"text",autoComplete:"on",placeholder:e.elementContentList.portal_login_form_placeholder1||e.$t("login.form.placeholder1")},model:{value:e.emailForm.email,callback:function(i){e.$set(e.emailForm,"email",i)},expression:"emailForm.email"}})],1),t("el-form-item",{staticClass:"code",attrs:{prop:"code",label:e.elementContentList.portal_login_form_label3||e.$t("login.form.label3")}},[t("el-input",{attrs:{name:"code",type:"text",autoComplete:"on",placeholder:e.elementContentList.portal_login_form_placeholder3||e.$t("login.form.placeholder3")},model:{value:e.emailForm.code,callback:function(i){e.$set(e.emailForm,"code",i)},expression:"emailForm.code"}}),t("el-button",{staticClass:"send_code",class:e.disabled?"disabled":"",attrs:{type:"text",disabled:e.disabled},on:{click:e.handleSendCode}},[e._v(e._s(e.isSend?e.elementContentList.portal_login_text7||e.$t("login.text7")+` (${e.remaining} s)`:e.elementContentList.portal_login_text6||e.$t("login.text6")))])],1)],1),t("div",{staticClass:"remember"},[t("el-checkbox",{model:{value:e.isAgree,callback:function(i){e.isAgree=i},expression:"isAgree"}}),t("span",{staticClass:"agreement"},[e._v(e._s(e.elementContentList.portal_login_text10||e.$t("login.text10"))),t("span",{on:{click:function(i){return e.handleShowAgreement("service")}}},[e._v(e._s(e.elementContentList.portal_login_text11||e.$t("login.text11")))]),e._v(", "),t("span",{on:{click:function(i){return e.handleShowAgreement("privacy")}}},[e._v(e._s(e.elementContentList.portal_login_text12||e.$t("login.text12")))]),e._v(".")])],1),t("el-button",{staticClass:"register_btn",attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(i){return i.preventDefault(),e.handleNext.apply(null,arguments)}}},[e._v(" "+e._s(e.elementContentList.portal_btns_next||e.$t("btns.next"))+" ")])],1):t("div",{staticClass:"form_card"},[t("el-form",{ref:"signForm",attrs:{autoComplete:"on",model:e.signForm,rules:e.signRules,"label-position":"top"}},[t("el-form-item",{attrs:{prop:"username",label:e.elementContentList.portal_login_label6||e.$t("login.form.label6")}},[t("el-input",{attrs:{name:"username",type:"text",autoComplete:"on",placeholder:e.elementContentList.portal_login_placeholder6||e.$t("login.form.placeholder6")},model:{value:e.signForm.username,callback:function(i){e.$set(e.signForm,"username",i)},expression:"signForm.username"}})],1),t("el-form-item",{attrs:{prop:"password",label:e.elementContentList.portal_login_label7||e.$t("login.form.label7")}},[t("el-input",{attrs:{name:"password",type:e.pwdType,autoComplete:"on",placeholder:e.elementContentList.portal_login_placeholder4||e.$t("login.form.placeholder4")},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.handleSignUp.apply(null,arguments)}},model:{value:e.signForm.password,callback:function(i){e.$set(e.signForm,"password",i)},expression:"signForm.password"}},[t("span",{attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"},[t("i",{staticClass:"el-icon-view"})])])],1),t("el-form-item",{attrs:{prop:"checkPwd",label:e.elementContentList.portal_login_label5||e.$t("login.form.label5")}},[t("el-input",{attrs:{name:"checkPwd",type:e.pwdType2,autoComplete:"on",placeholder:e.elementContentList.portal_login_placeholder5||e.$t("login.form.placeholder5")},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.handleSignUp.apply(null,arguments)}},model:{value:e.signForm.checkPwd,callback:function(i){e.$set(e.signForm,"checkPwd",i)},expression:"signForm.checkPwd"}},[t("span",{attrs:{slot:"suffix"},on:{click:e.showPwd2},slot:"suffix"},[t("i",{staticClass:"el-icon-view"})])])],1)],1),t("el-button",{staticClass:"register_btn",attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(i){return i.preventDefault(),e.handleSignUp.apply(null,arguments)}}},[e._v(" "+e._s(e.elementContentList.portal_login_text2||e.$t("login.text2"))+" ")])],1),t("p",{staticClass:"have_account"},[e._v(" "+e._s(e.elementContentList.portal_login_text13||e.$t("login.text13"))+" "),t("span",{staticStyle:{color:"#f6497f"},on:{click:e.handleSignIn}},[e._v(e._s(e.elementContentList.portal_login_text5||e.$t("login.text5")))])])])]),e.showTerms?t("terms"):e._e(),e.showPrivacy?t("privacyPolicy"):e._e()],1)},w=[function(){var o=this,e=o._self._c;return e("div",{staticClass:"logo flex_c_c"},[e("img",{attrs:{src:c}}),e("img",{attrs:{src:_}})])}],C=r(u,v,w,!1,null,null);const F=C.exports;export{F as default};
