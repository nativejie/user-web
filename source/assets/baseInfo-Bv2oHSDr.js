import{n as o,m as r,o as d,q as h,t as c,w as p,x as _,y as m,z as f,A as n}from"./index-C6rblSgp.js";import{i as l}from"./validate-MZlC_wl6.js";const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHhSURBVHic7du/UsJAEIDxzz8z6bDSzs6XwM7O3re08wl4A19CK6ikS2cBN5MZheRyu3e7Yb8GiuQIv5kL5AgQRVEURVFktk5z8BvNwSu0Bt6APbDTeAHPQGvg+fj8CSUkr0BDnJQKkkeg/3BS4kjegM7hpESRPAFNwUmJIXkBysFJiSB5AJqDkypGsg5UgpMqQrIMJIGTmo1kFUgSJzULySKQBk4qG+la6UDmpomTeszZ2BJQDZwtsMnZ4UrpQHKrhfMO9Dk7WQAyiwPtgUzjQFsg8zjQDsgFDrQBcoMD9YFc4UBdIHc4UA/IJQ7UAXKLA/pArnFAF8g9DugBLQIHdIAWgwPyQIvCAVmgxeGA3ILZPQvEATmgO6FxTtUEB+SAstZ5M2uGA7JTTKOmOCAHtBIaZ1hzHJAB6pA/B5nAARkg6ellBgdkgB4ExkiZwgEZIKnpZQ4H7EwxkzhgY4qZxYFyoBVld7qbxgG4Ldx/Lk7PAecDwzhQDrTn8AZPQfXAD4f7cbbH7b8wjjJMYrljBbweH7/5CxJFURRFOk39FOvQWxRr1Y4JXzemANX4taJVG+Dz3AZTLjWWigPwwsjVwBiQxlKqtYqALr4AGjlRTzlJdyj/eb9xcb0YRVEURZfZLyyVh+pTagW+AAAAAElFTkSuQmCC",C={name:"",data(){return{personalInfo:{nickname:"",email:"",phone:"",password:"",birthday:""},personalName:"",birthday:"",newPhone:"",showDialog:!1,showEmail:!0,edit:"",authCode:"",disabled:!1,isSend:!1,remaining:60,timer:null,newEmail:"",newAuthCode:"",newPassword:"",checkPwd:"",tips:"",tips2:"",pwdType:"password",pwdType2:"password",elementContentList:""}},mounted(){this.elementContentList=window.elementContentList,this.getUserInfo()},methods:{showPwd(){this.pwdType==="password"?this.pwdType="":this.pwdType="password"},showPwd2(){this.pwdType2==="password"?this.pwdType2="":this.pwdType2="password"},getUserInfo(){r().then(a=>{this.personalInfo=a.data})},handleBlur3(){if(this.newEmail=="")return this.tips=this.elementContentList.portal_login_form_validate1||this.$t("login.form.validate1");if(l(this.newEmail))this.tips="";else return this.tips=this.elementContentList.portal_login_form_validate2||this.$t("login.form.validate2")},handleBlur4(){if(this.newAuthCode=="")return this.tips2=this.elementContentList.portal_login_form_validate3||this.$t("login.form.validate3");this.tips2=""},handlePwdConfirm(){if(this.checkPwd.length=="")return this.tips2=this.elementContentList.portal_login_form_validate8||this.$t("login.form.validate8");if(this.newPassword!=this.checkPwd)return this.tips2=this.elementContentList.portal_login_form_validate9||this.$t("login.form.validate9");if(this.tips2="",this.newPassword.length=="")return this.tips=this.elementContentList.portal_login_form_validate3||this.$t("login.form.validate3");if(this.newPassword.length<8)return this.tips=this.elementContentList.portal_login_form_validate4||this.$t("login.form.validate4");this.tips="",d(this.authCode,this.newPassword).then(a=>{a.code==200&&(this.$message.success({message:"success",duration:1500}),this.showDialog=!1)})},handleBlur2(){if(this.checkPwd.length=="")return this.tips2=this.elementContentList.portal_login_form_validate8||this.$t("login.form.validate8");if(this.newPassword!=this.checkPwd)return this.tips2=this.elementContentList.portal_login_form_validate9||this.$t("login.form.validate9");this.tips2=""},handleBlur(){if(this.newPassword.length=="")return this.tips=this.elementContentList.portal_login_form_validate3||this.$t("login.form.validate3");if(this.newPassword.length<8)return this.tips=this.elementContentList.portal_login_form_validate4||this.$t("login.form.validate4");this.tips=""},handleSendCode(){this.disabled=!0,this.isSend=!0,this.remaining=60,this.timer=null,this.timer=setInterval(()=>{this.remaining--,this.remaining==0&&(clearInterval(this.timer),this.disabled=!1,this.isSend=!1,this.remaining=60)},1e3),this.edit=="password"?h().then(()=>{}):c().then(()=>{})},handleSendNewCode(){this.disabled=!0,this.isSend=!0,this.remaining=60,this.timer=null,this.timer=setInterval(()=>{this.remaining--,this.remaining==0&&(clearInterval(this.timer),this.disabled=!1,this.isSend=!1,this.remaining=60)},1e3),p(this.newEmail).then(a=>{})},handleShowEmail(){if(!this.authCode)return!1;_(this.authCode).then(a=>{a.code==200&&(this.showEmail=!1,this.disabled=!1,this.isSend=!1)})},handleEmailConfirm(){if(this.newEmail=="")return this.tips=this.elementContentList.portal_login_form_validate1||this.$t("login.form.validate1");if(l(this.newEmail))this.tips="";else return this.tips=this.elementContentList.portal_login_form_validate2||this.$t("login.form.validate2");if(this.newAuthCode=="")return this.tips2=this.elementContentList.portal_login_form_validate5||this.$t("login.form.validate5");this.tips2="",m(this.newAuthCode).then(a=>{a.code==200&&f(this.newEmail,this.newAuthCode,this.authCode).then(t=>{t.code==200&&(this.getUserInfo(),this.handleClose())})})},handleEdit(a){switch(a){case"nickname":this.edit="name",this.personalName=this.personalInfo.nickname;break;case"email":this.edit="email";break;case"phoneNum":this.edit="phoneNum",this.newPhone=this.personalInfo.phone;break;case"password":this.edit="password";break;case"birthday":this.edit="birthday",this.birthday=this.personalInfo.birthday;break}this.showDialog=!0},handleSavePhoneNum(){if(!this.newPhone)return!1;const a={phone:this.newPhone,nickname:this.personalInfo.nickname,birthday:this.personalInfo.birthday};n(a).then(t=>{t.code==200&&(this.getUserInfo(),this.handleClose())})},handleSavebirthday(){const a={birthday:this.birthday,nickname:this.personalInfo.nickname};n(a).then(t=>{t.code==200&&(this.getUserInfo(),this.handleClose())})},handleSaveName(){if(!this.personalName)return!1;const a={nickname:this.personalName};n(a).then(t=>{t.code==200&&(this.getUserInfo(),this.handleClose())}).catch(()=>{})},handleClose(){this.showDialog=!1,this.showEmail=!0,this.isSend=!1,this.disabled=!1,this.personalName="",this.birthday="",this.edit="",this.remaining=60,this.newEmail="",this.newAuthCode="",this.authCode=""}}};var b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"baseInfo"},[e("div",{staticClass:"info_card"},[e("p",{staticClass:"per_name"},[e("span",[t._v(t._s(t.personalInfo.nickname))]),e("img",{attrs:{src:i},on:{click:function(s){return t.handleEdit("nickname")}}})]),e("hr"),e("p",{staticClass:"per_detail flex"},[e("span",{staticClass:"per_label"},[t._v(t._s(t.elementContentList.portal_baseInfo_text1||t.$t("baseInfo.text1")))]),e("span",[t._v(t._s(t.personalInfo.email?t.personalInfo.email:t.elementContentList.portal_baseInfo_text3||t.$t("baseInfo.text3")))]),e("img",{attrs:{src:i},on:{click:function(s){return t.handleEdit("email")}}})]),e("p",{staticClass:"per_detail flex"},[e("span",{staticClass:"per_label"},[t._v(t._s(t.elementContentList.portal_baseInfo_text2||t.$t("baseInfo.text2")))]),e("span",[t._v(t._s(t.personalInfo.phone?t.personalInfo.phone:t.elementContentList.portal_baseInfo_text3||t.$t("baseInfo.text3")))]),e("img",{attrs:{src:i},on:{click:function(s){return t.handleEdit("phoneNum")}}})]),e("p",{staticClass:"per_detail flex"},[e("span",{staticClass:"per_label"},[t._v(t._s(t.elementContentList.portal_baseInfo_text4||t.$t("baseInfo.text4")))]),e("span",[t._v(t._s(t.personalInfo.password?"":"********"))]),e("img",{attrs:{src:i},on:{click:function(s){return t.handleEdit("password")}}})]),e("p",{staticClass:"per_detail flex"},[e("span",{staticClass:"per_label"},[t._v(t._s(t.elementContentList.portal_baseInfo_text5||t.$t("baseInfo.text5")))]),e("span",[t._v(t._s(t.personalInfo.birthday?t.personalInfo.birthday.split(" ")[0]:t.elementContentList.portal_baseInfo_text3||t.$t("baseInfo.text3")))]),e("img",{attrs:{src:i},on:{click:function(s){return t.handleEdit("birthday")}}})])]),t.showDialog?e("div",{staticClass:"my_dialog"},[t.edit=="name"?e("div",{staticClass:"dialog_card"},[e("p",{staticClass:"dia_title flex_b_c"},[t._v(" "+t._s(t.elementContentList.portal_baseInfo_text6||t.$t("baseInfo.text6"))+" "),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),e("p",{staticClass:"name_input"},[e("el-input",{model:{value:t.personalName,callback:function(s){t.personalName=s},expression:"personalName"}})],1),e("p",{staticClass:"dia_btns"},[e("el-button",{staticClass:"cancel",on:{click:t.handleClose}},[t._v(t._s(t.elementContentList.portal_btns_cancel||t.$t("btns.cancel")))]),e("el-button",{staticClass:"save",on:{click:t.handleSaveName}},[t._v(t._s(t.elementContentList.portal_btns_save||t.$t("btns.save")))])],1)]):t._e(),t.edit=="birthday"?e("div",{staticClass:"dialog_card"},[e("p",{staticClass:"dia_title flex_b_c"},[t._v(" "+t._s(t.elementContentList.portal_baseInfo_text7||t.$t("baseInfo.text7"))+" "),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),e("p",{staticClass:"name_input"},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"Select Date"},model:{value:t.birthday,callback:function(s){t.birthday=s},expression:"birthday"}})],1),e("p",{staticClass:"dia_btns"},[e("el-button",{staticClass:"cancel",on:{click:t.handleClose}},[t._v(t._s(t.elementContentList.portal_btns_cancel||t.$t("btns.cancel")))]),e("el-button",{staticClass:"save",on:{click:t.handleSavebirthday}},[t._v(t._s(t.elementContentList.portal_btns_save||t.$t("btns.save")))])],1)]):t._e(),t.edit=="phoneNum"?e("div",{staticClass:"dialog_card"},[e("p",{staticClass:"dia_title flex_b_c"},[t._v(" "+t._s(t.elementContentList.portal_baseInfo_text8||t.$t("baseInfo.text8"))+" "),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),e("p",{staticClass:"name_input"},[e("el-input",{model:{value:t.newPhone,callback:function(s){t.newPhone=s},expression:"newPhone"}})],1),e("p",{staticClass:"dia_btns"},[e("el-button",{staticClass:"cancel",on:{click:t.handleClose}},[t._v(t._s(t.elementContentList.portal_btns_cancel||t.$t("btns.cancel")))]),e("el-button",{staticClass:"save",on:{click:t.handleSavePhoneNum}},[t._v(t._s(t.elementContentList.portal_btns_save||t.$t("btns.save")))])],1)]):t._e(),t.edit=="email"||t.edit=="password"?e("div",{staticClass:"dialog_card"},[t.showEmail?e("div",[e("p",{staticClass:"dia_title flex_b_c"},[t._v(" "+t._s(t.elementContentList.portal_baseInfo_text9||t.$t("baseInfo.text9"))+" "),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),e("p",{staticStyle:{"font-size":"14px","line-height":"22px","margin-top":"23px"}},[t._v(" "+t._s(t.elementContentList.portal_baseInfo_text10||t.$t("baseInfo.text10"))+" ")]),e("p",{staticStyle:{"font-size":"16px","font-weight":"500","line-height":"24px","margin-top":"35px"}},[t._v(" "+t._s(this.personalInfo.email)+" ")]),e("p",{staticClass:"auth_code flex_b_c"},[e("el-input",{attrs:{placeholder:t.elementContentList.portal_baseInfo_placeholder1||t.$t("baseInfo.placeholder1")},model:{value:t.authCode,callback:function(s){t.authCode=s},expression:"authCode"}}),e("el-button",{staticClass:"send_code",class:t.disabled?"disabled":"",attrs:{disabled:t.disabled},on:{click:t.handleSendCode}},[t._v(t._s(t.isSend?t.elementContentList.portal_login_text7||t.$t("login.text7")+` (${t.remaining} s)`:t.elementContentList.portal_login_text6||t.$t("login.text6")))])],1),e("p",{staticClass:"continue"},[e("el-button",{staticClass:"btn",on:{click:t.handleShowEmail}},[t._v(t._s(t.elementContentList.portal_baseInfo_text11||t.$t("baseInfo.text11")))])],1)]):t._e(),!t.showEmail&&t.edit=="email"?e("div",[e("p",{staticClass:"dia_title flex_b_c"},[e("span",[t._v(t._s(t.elementContentList.portal_baseInfo_text12||t.$t("baseInfo.text12")))]),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),e("p",{staticClass:"new_email"},[e("el-input",{attrs:{placeholder:t.elementContentList.portal_baseInfo_placeholder2||t.$t("baseInfo.placeholder2")},on:{blur:t.handleBlur3},model:{value:t.newEmail,callback:function(s){t.newEmail=s},expression:"newEmail"}})],1),e("p",{staticClass:"err_tip"},[t._v(t._s(t.tips))]),e("p",{staticClass:"auth_code flex_b_c"},[e("el-input",{attrs:{placeholder:t.elementContentList.portal_baseInfo_placeholder3||t.$t("baseInfo.placeholder3")},on:{blur:t.handleBlur4},model:{value:t.newAuthCode,callback:function(s){t.newAuthCode=s},expression:"newAuthCode"}}),e("el-button",{staticClass:"send_code",class:t.disabled?"disabled":"",attrs:{disabled:t.disabled},on:{click:t.handleSendNewCode}},[t._v(t._s(t.isSend?t.elementContentList.portal_login_text7||t.$t("login.text7")+` (${t.remaining} s)`:t.elementContentList.portal_login_text6||t.$t("login.text6")))])],1),e("p",{staticClass:"err_tip"},[t._v(t._s(t.tips2))]),e("p",{staticClass:"continue"},[e("el-button",{staticClass:"btn",on:{click:t.handleEmailConfirm}},[t._v(t._s(t.elementContentList.portal_btns_confirm||t.$t("btns.confirm")))])],1)]):t._e(),!t.showEmail&&t.edit=="password"?e("div",[e("p",{staticClass:"dia_title flex_b_c"},[e("span",[t._v(t._s(t.elementContentList.portal_baseInfo_text13||t.$t("baseInfo.text13"))+" ")]),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})]),e("p",{staticClass:"new_email"},[e("el-input",{attrs:{type:t.pwdType,placeholder:t.elementContentList.portal_baseInfo_placeholder4||t.$t("baseInfo.placeholder4")},on:{blur:t.handleBlur},model:{value:t.newPassword,callback:function(s){t.newPassword=s},expression:"newPassword"}},[e("span",{attrs:{slot:"suffix"},on:{click:t.showPwd},slot:"suffix"},[e("i",{staticClass:"el-icon-view"})])])],1),e("p",{staticClass:"err_tip"},[t._v(t._s(t.tips))]),e("p",{staticClass:"new_email"},[e("el-input",{attrs:{type:t.pwdType2,placeholder:t.elementContentList.portal_baseInfo_placeholder5||t.$t("baseInfo.placeholder5")},on:{blur:t.handleBlur2},model:{value:t.checkPwd,callback:function(s){t.checkPwd=s},expression:"checkPwd"}},[e("span",{attrs:{slot:"suffix"},on:{click:t.showPwd2},slot:"suffix"},[e("i",{staticClass:"el-icon-view"})])])],1),e("p",{staticClass:"err_tip"},[t._v(t._s(t.tips2))]),e("p",{staticClass:"continue"},[e("el-button",{staticClass:"btn",on:{click:t.handlePwdConfirm}},[t._v(t._s(t.elementContentList.portal_btns_confirm||t.$t("btns.confirm")))])],1)]):t._e()]):t._e()]):t._e()])},u=[],w=o(C,b,u,!1,null,null);const I=w.exports;export{I as default};
